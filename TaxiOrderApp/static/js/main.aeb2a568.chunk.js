(this["webpackJsonptaxi-order-app"]=this["webpackJsonptaxi-order-app"]||[]).push([[0],{14:function(e,a,r){e.exports={header:"App_header__16p6_",main:"App_main__1GL3J"}},15:function(e,a,r){e.exports={container:"CrewScreen_container__2ypqt",wrapper:"CrewScreen_wrapper__2A4bk"}},16:function(e,a,r){e.exports={error:"Input_error__3S6wi",btnContainer:"Input_btnContainer__3Fimd"}},22:function(e,a,r){e.exports={card:"CrewCard_card__2Tt90"}},23:function(e,a,r){e.exports={map:"Map_map__p4UMk"}},24:function(e,a,r){e.exports={list:"CrewList_list__GqEho"}},28:function(e,a,r){e.exports=r(41)},33:function(e,a,r){},41:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),c=r(10),s=r.n(c),o=(r(33),r(3)),i=r(14),l=r.n(i),d=r(1),u=r(2),m=r.n(u),p=r(17),f=r(4),b=/^(\d{1,2}-?[\u0430-\u044f\u0451]\s)?([\u0410-\u042f\u0430-\u044f]\s?)+(,?\s{1,3})(\d{1,4})([\\\/]\d{1,4})?$/i,O={isValid:!1,error:"\u0410\u0434\u0440\u0435\u0441 \u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},v={isValid:!1,error:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441. \u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u0438\u0434: \u0423\u043b\u0438\u0446\u0430, \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043c\u0430."},E={isValid:!0,error:""},h=function(e){return e?b.test(e.trim())?E:v:O},_=r(20),k=r(21),y={preset:"islands#yellowDotIcon"},w={preset:"islands#redDotIcon"},R={preset:"islands#darkGreenAutoIcon"},g={},j={iconCaption:"\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"},M={},C={center:[55.76,37.64],zoom:7},N="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u043b\u0438\u0446\u0443 \u0438 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043c\u0430.",x="\u041d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435.",D="\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438.",S=new(function(){function e(){var a=this;Object(_.a)(this,e),this.map=null,this.addressMark=null,this.invalidAddressMark=null,this.cabMarks=[],this.addressMarkSubscribers=[],this.createCabMarks=Object(f.a)(m.a.mark((function r(){var t,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(t=0;t<10;t+=1)n=e.createCabMark([55.76,37.64]),a.cabMarks.push(n);case 1:case"end":return r.stop()}}),r)}))),this.placeAddressMark=function(){var r=Object(f.a)(m.a.mark((function r(t){var n,c,s,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.get("coords"),!a.addressMark||!a.map){r.next=7;break}return r.next=5,e.getAddress(n);case 5:(c=r.sent)?(a.changeInvalidMarkToValid(n),s={address:c,lat:n[0],lon:n[1]},a.notifyAll(s)):(a.changeValidMarkToInvalid(n),o={error:N,lat:n[0],lon:n[1]},a.notifyAll(o));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),this.displayCabLocation=function(){var r=Object(f.a)(m.a.mark((function r(t){var n,c,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=Math.min(t.length,10),c=0;c<n;c+=1)s=[t[c].lat,t[c].lon],a.cabMarks[c]?e.moveMark(a.cabMarks[c],s):a.cabMarks[c]=e.createCabMark(s),a.map&&a.map.geoObjects.add(a.cabMarks[c]);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),this.deleteCabFromMap=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.cabMarks.forEach((function(e){a.map&&a.map.geoObjects.remove(e)}));case 1:case"end":return e.stop()}}),e)})))}return Object(k.a)(e,[{key:"createMap",value:function(){var e=Object(f.a)(m.a.mark((function e(a){var r,t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.map){e.next=16;break}return e.prev=1,e.next=4,window.ymaps.geolocation.get();case 4:r=e.sent,t=r.geoObjects.get(0).properties.get("boundedBy",{}),n=window.ymaps.util.bounds.getCenterAndZoom(t,[300,300]),c=new window.ymaps.Map(a,n),this.map=c,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),s=new window.ymaps.Map(a,C),this.map=s;case 15:this.map.events.add("click",this.placeAddressMark);case 16:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(a){return e.apply(this,arguments)}}()},{key:"createAddressMark",value:function(){this.addressMark=new window.ymaps.Placemark([55.76,37.64],g,y)}},{key:"createInvalidAddressMark",value:function(){this.invalidAddressMark=new window.ymaps.Placemark([55.76,37.64],j,w)}},{key:"changeInvalidMarkToValid",value:function(a){this.map&&this.invalidAddressMark&&this.addressMark&&(this.map.geoObjects.remove(this.invalidAddressMark),e.moveMark(this.addressMark,a),this.map.geoObjects.add(this.addressMark))}},{key:"changeValidMarkToInvalid",value:function(a){this.map&&this.invalidAddressMark&&this.addressMark&&(this.map.geoObjects.remove(this.addressMark),e.moveMark(this.invalidAddressMark,a),this.map.geoObjects.add(this.invalidAddressMark))}},{key:"notifyAll",value:function(e){this.addressMarkSubscribers.forEach((function(a){return a(e)}))}},{key:"deleteAddressMarksFromMap",value:function(){this.map&&this.addressMark&&this.invalidAddressMark&&(this.map.geoObjects.remove(this.addressMark),this.map.geoObjects.remove(this.invalidAddressMark))}},{key:"getCoordinate",value:function(){var e=Object(f.a)(m.a.mark((function e(a){var r,t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.map){e.next=18;break}return r={boundedBy:this.map.getBounds(),result:1},e.prev=2,e.next=5,window.ymaps.geocode(a,r);case 5:if(t=e.sent,!(n=t.geoObjects.get(0))){e.next=12;break}return c=n.geometry.getCoordinates(),s=n.properties.get("boundedBy",{}),this.addressMark&&(this.changeInvalidMarkToValid(c),this.map.setBounds(s,{checkZoomRange:!0})),e.abrupt("return",{address:a,lat:c[0],lon:c[1]});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),this.deleteAddressMarksFromMap(),e.abrupt("return",{error:D});case 18:return this.deleteAddressMarksFromMap(),e.abrupt("return",{error:x});case 20:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(a){return e.apply(this,arguments)}}()},{key:"onAddressMarkChange",value:function(e){this.addressMarkSubscribers.push(e)}},{key:"unsubscribeAddressMark",value:function(e){this.addressMarkSubscribers=this.addressMarkSubscribers.filter((function(a){return!(a===e)}))}},{key:"init",value:function(e){var a=this;window.ymaps.ready((function(){a.createMap(e),a.createAddressMark(),a.createInvalidAddressMark(),a.createCabMarks()}))}}],[{key:"moveMark",value:function(e,a){e.geometry&&e.geometry.setCoordinates(a)}},{key:"getAddress",value:function(){var e=Object(f.a)(m.a.mark((function e(a){var r,t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ymaps.geocode(a);case 3:if(r=e.sent,t=r.geoObjects.get(0).getThoroughfare(),n=r.geoObjects.get(0).getPremiseNumber(),!t||!n){e.next=8;break}return e.abrupt("return","".concat(t,", ").concat(n));case 8:return e.abrupt("return",null);case 11:return e.prev=11,e.t0=e.catch(0),c=e.t0,s=c.message,console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. ".concat(s)),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}()},{key:"createCabMark",value:function(e){return new window.ymaps.Placemark(e,M,R)}}]),e}()),A=function(e){var a=e.addresses[0],r=a.lat,t=a.lon,n={code:200,descr:"OK",data:{crews_info:[{crew_id:123,car_mark:"KIA",car_model:"CEED",car_color:"\u0441\u0438\u043d\u0438\u0439",car_number:"\u0415234\u041a\u0423",driver_name:"\u0414\u0435\u0442\u043e\u0447\u043a\u0438\u043d",driver_phone:"7788",lat:r+.00267,lon:t+.009012,distance:900},{crew_id:125,car_mark:"Hyundai",car_model:"Solaris",car_color:"\u0431\u0435\u043b\u044b\u0439",car_number:"\u0424567\u0410\u0421",driver_name:"\u041f\u0435\u0442\u0440\u043e\u0432",driver_phone:"8899",lat:r+.00298,lon:t+.003232,distance:600},{crew_id:127,car_mark:"Lada",car_model:"Vesta",car_color:"\u0447\u0435\u0440\u043d\u044b\u0439",car_number:"\u0415134\u041a\u0420",driver_name:"\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432",driver_phone:"8989",lat:r-.0022892,lon:t-.0030001,distance:600},{crew_id:130,car_mark:"Chevrolet",car_model:"Lacetti",car_color:"\u043a\u0440\u0430\u0441\u043d\u044b\u0439",car_number:"\u0410875\u041a\u0420",driver_name:"\u0421\u0435\u043c\u0435\u043d\u043e\u0432",driver_phone:"456456",lat:r+.001212,lon:t+.001233,distance:300}]}};return new Promise((function(e){setTimeout((function(){return e(JSON.stringify(n))}),600)}))},I=function(e){return e<10?"0".concat(e):"".concat(e)},L=function(){var e=new Date,a=e.getFullYear(),r=e.getMonth()+1,t=e.getDate(),n=e.getHours(),c=e.getMinutes(),s=e.getSeconds();return"".concat(a).concat(I(r)).concat(I(t)).concat(I(n)).concat(I(c)).concat(I(s))},F=function(){var e=Object(f.a)(m.a.mark((function e(a){var r,t,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={source_time:L(),addresses:[a]},console.log("Crew request ",r),e.prev=2,e.next=5,A(r);case 5:return t=e.sent,e.abrupt("return",JSON.parse(t));case 9:return e.prev=9,e.t0=e.catch(2),n=e.t0,c=n.message,e.abrupt("return",{code:400,descr:c,data:{crews_info:[]}});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(m.a.mark((function e(a){var r,t,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(a);case 2:if(r=e.sent,t=r.code,n=r.descr,c=r.data.crews_info,200===t){e.next=6;break}return e.abrupt("return",{error:n});case 6:if(0!==c.length){e.next=8;break}return e.abrupt("return",{error:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u044d\u043a\u0438\u043f\u0430\u0436\u0430."});case 8:return e.abrupt("return",{data:c});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),V=function(e){var a=e.crew_id,r={code:200,descr:"OK",data:{order_id:"99".concat(a)}};return new Promise((function(e){setTimeout((function(){return e(JSON.stringify(r))}),600)}))},U=function(){var e=Object(f.a)(m.a.mark((function e(a,r){var t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={source_time:L(),addresses:[a],crew_id:r},console.log("Order request ",t),e.prev=2,e.next=5,V(t);case 5:return n=e.sent,e.abrupt("return",JSON.parse(n));case 9:return e.prev=9,e.t0=e.catch(2),c=e.t0,s=c.message,e.abrupt("return",{code:400,descr:s,data:{order_id:0}});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(m.a.mark((function e(a,r){var t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(a,r);case 2:if(t=e.sent,n=t.code,c=t.descr,s=t.data.order_id,200===n){e.next=6;break}return e.abrupt("return",{error:c});case 6:return e.abrupt("return",{orderID:s});case 7:case"end":return e.stop()}}),e)})));return function(a,r){return e.apply(this,arguments)}}(),P="ORDER_FORM/CREW/CLEAR",G="ORDER_FORM/ORDER/CLEAR",W=function(e){return{type:"ORDER_FORM/LOCATION/LOAD_SUCCESS",payload:{data:e}}},Q=function(e){return{type:"ORDER_FORM/LOCATION/LOAD_ERROR",payload:{error:e}}},J=function(e){return{type:"ORDER_FORM/CREW/LOAD_SUCCESS",payload:e}},q=function(){return{type:P,payload:null}},H=function(e){return{type:"ORDER_FORM/ORDER/SEND_ERROR",payload:{error:e}}},K=function(e){return e.sort((function(e,a){return e.distance>a.distance?1:e.distance<a.distance?-1:0}))},Z=function(e){return function(){var a=Object(f.a)(m.a.mark((function a(r){var t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"ORDER_FORM/CREW/LOAD_REQUEST",payload:null}),a.next=3,T(e);case 3:"data"in(t=a.sent)?(r(J(t)),S.displayCabLocation(Object(p.a)(t.data))):(r({type:"ORDER_FORM/CREW/LOAD_ERROR",payload:{error:t.error}}),S.deleteCabFromMap());case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},z={input:{isValid:!1,value:"",error:""},location:{isLoading:!1,isValid:!1,error:"",address:"",lat:null,lon:null},crew:{isLoading:!1,error:"",list:[],selected:null},order:{isSending:!1,error:"",isSuccess:!1,orderID:null}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_FORM/INPUT/CHANGE":var r=a.payload,t=r.data,n=h(t);return Object(d.a)(Object(d.a)({},e),{},{input:Object(d.a)(Object(d.a)({},n),{},{value:t})});case"ORDER_FORM/LOCATION/LOAD_REQUEST":var c=Object(d.a)(Object(d.a)({},e.location),{},{isLoading:!0,error:"",isValid:!1,address:"",lat:null,lon:null});return Object(d.a)(Object(d.a)({},e),{},{location:c});case"ORDER_FORM/LOCATION/LOAD_SUCCESS":var s=a.payload.data,o=Object(d.a)(Object(d.a)(Object(d.a)({},e.location),s),{},{isLoading:!1,isValid:!0}),i=Object(d.a)(Object(d.a)({},e.input),{},{isValid:!0,error:"",value:s.address});return Object(d.a)(Object(d.a)({},e),{},{location:o,input:i});case"ORDER_FORM/LOCATION/LOAD_ERROR":var l=a.payload.error,u=Object(d.a)(Object(d.a)({},e.location),{},{isLoading:!1,error:l});return Object(d.a)(Object(d.a)({},e),{},{location:u});case"ORDER_FORM/CREW/LOAD_REQUEST":var m=Object(d.a)(Object(d.a)({},e.crew),{},{isLoading:!0,error:"",list:[],selected:null});return Object(d.a)(Object(d.a)({},e),{},{crew:m});case"ORDER_FORM/CREW/LOAD_SUCCESS":var f=a.payload.data;K(f);var b=Object(d.a)(Object(d.a)({},e.crew),{},{isLoading:!1,list:Object(p.a)(f),selected:f[0].crew_id});return Object(d.a)(Object(d.a)({},e),{},{crew:b});case"ORDER_FORM/CREW/LOAD_ERROR":var O=a.payload.error,v=Object(d.a)(Object(d.a)({},e.crew),{},{isLoading:!1,error:O});return Object(d.a)(Object(d.a)({},e),{},{crew:v});case P:var E=Object(d.a)(Object(d.a)({},e.crew),{},{isLoading:!1,error:"",list:[],selected:null});return Object(d.a)(Object(d.a)({},e),{},{crew:E});case"ORDER_FORM/ORDER/SEND_REQUEST":var _=Object(d.a)(Object(d.a)({},e.order),{},{isSending:!0,error:"",isSuccess:!1,orderID:null});return Object(d.a)(Object(d.a)({},e),{},{order:_});case"ORDER_FORM/ORDER/SEND_SUCCESS":var k=Object(d.a)(Object(d.a)({},e.order),{},{isSending:!1,isSuccess:!0,orderID:a.payload.id});return Object(d.a)(Object(d.a)({},e),{},{order:k});case"ORDER_FORM/ORDER/SEND_ERROR":var y=Object(d.a)(Object(d.a)({},e.order),{},{isSending:!1,error:a.payload.error});return Object(d.a)(Object(d.a)({},e),{},{order:y});case G:var w=Object(d.a)(Object(d.a)({},e.order),{},{isSending:!1,error:"",isSuccess:!1,orderID:null});return Object(d.a)(Object(d.a)({},e),{},{order:w});default:return e}},$=r(27),X=function(e){var a=e.text,r=e.name,t=(e.extensionClass,e.onButtonClick),c=e.disabled,s=Object($.a)(e,["text","name","extensionClass","onButtonClick","disabled"]);return n.a.createElement("button",Object.assign({className:"btn btn-lg btn-".concat(c?"secondary":"primary"),type:"submit",name:r,onClick:t,disabled:c},s),a)};X.defaultProps={extensionClass:""};var ee=X,ae=r(22),re=r.n(ae),te=function(e){var a=e.car,r=e.color,t=e.number;return n.a.createElement("div",{className:"card ".concat(re.a.card),style:{width:"18rem"}},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},a),n.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},r),n.a.createElement("p",{className:"card-text"},n.a.createElement("strong",null,n.a.createElement("em",null,t)))))},ne=function(e){return e.input},ce=function(e){return{isValid:e.location.isValid,isLoading:e.location.isLoading,error:e.location.error}},se=function(e){return{crew:e.crew.selected,isLoading:e.crew.isLoading,error:e.crew.error,list:e.crew.list}},oe=function(e){return{isInputValid:e.input.isValid,isAddressValid:e.location.isValid,crew:e.crew.selected}},ie=function(e){return Object(d.a)({},e.order)},le=r(15),de=r.n(le),ue=function(e){var a=e.isLarge,r={width:a?"5rem":"2rem",height:a?"5rem":"2rem"};return t.createElement("div",{className:"spinner-border text-info",style:r,role:"status"},t.createElement("span",{className:"sr-only"},"Loading..."))},me=function(e){var a=e.text,r=a?"danger":"info";return n.a.createElement("div",{className:"alert alert-".concat(r),role:"alert"},a||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0434\u0430\u0447\u0438 \u0442\u0430\u043a\u0441\u0438, \u0438\u043b\u0438 \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e \u043d\u0430 \u043a\u0430\u0440\u0442\u0435.")},pe=function(){var e=Object(o.d)(ce,o.b),a=Object(o.d)(se,o.b),r=n.a.createElement(me,null);if(e.isLoading||a.isLoading)r=n.a.createElement(ue,null);else if(e.error||a.error){var t=e.error||a.error;r=n.a.createElement(me,{text:t})}else if(a.crew&&a.list){var c=a.list[0],s={color:c.car_color,car:"".concat(c.car_mark," ").concat(c.car_model),number:c.car_number};r=n.a.createElement(te,s)}return n.a.createElement("div",{className:"form-group row flex-column flex-sm-row ".concat(de.a.wrapper)},n.a.createElement("div",{className:"vol col-sm-3"},n.a.createElement("p",null,"\u041f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u044d\u043a\u0438\u043f\u0430\u0436:")),n.a.createElement("div",{className:"col col-sm-6 ".concat(de.a.container)},r))},fe=n.a.memo(pe),be=r(23),Oe=r.n(be),ve=function(){var e=Object(o.c)(),a=function(a){e(function(e){return function(){var a=Object(f.a)(m.a.mark((function a(r){var t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r({type:"ORDER_FORM/LOCATION/LOAD_REQUEST",payload:null}),r(q()),"error"in e?(t=e.error,r(Q(t)),S.deleteCabFromMap()):(r(W(e)),r(Z(e)));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a))};return Object(t.useEffect)((function(){S.init("ymap"),S.onAddressMarkChange(a)})),n.a.createElement("div",{id:"ymap",className:"card ".concat(Oe.a.map)})},Ee=n.a.memo(ve),he=r(24),_e=r.n(he),ke=r(9),ye=r.n(ke),we=function(e){var a=e.data;return n.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},n.a.createElement("div",{className:ye.a.wrapper},n.a.createElement("h5",{className:ye.a.model},"".concat(a.car_mark," ").concat(a.car_model)),n.a.createElement("p",{className:ye.a.color},"".concat(a.car_color))),n.a.createElement("p",{className:ye.a.distance},n.a.createElement("em",null,"".concat(a.distance,"\u043c"))))},Re=function(){var e=Object(o.d)(se,o.b).list;return n.a.createElement("div",{className:"card ".concat(_e.a.list)},n.a.createElement("ul",{className:"list-group"},e&&e.map((function(e){return n.a.createElement(we,{data:e,key:e.crew_id})}))))},ge=n.a.memo(Re),je=r(16),Me=r.n(je),Ce=function(e){var a=e.value,r=e.btnName,t=e.onInputChange,c=e.onButtonClick,s=e.onEnterPress,o=e.label,i=e.name,l=e.id,d=e.type,u=e.placeholder,m=e.isValid,p=e.error;return n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"row flex-column flex-sm-row"},n.a.createElement("label",{htmlFor:l,className:"col col-sm-3 col-form-label"},o),n.a.createElement("div",{className:"col col-sm-7"},n.a.createElement("input",{value:a,id:l,className:"form-control",name:i,type:d,placeholder:u,onChange:function(e){var a=e.currentTarget,r=a.name,n=a.value;t(r,n)},onKeyPress:function(e){"Enter"===e.key&&m&&(e.preventDefault(),s(e))}})),n.a.createElement("div",{className:"col col-sm-2 d-flex justify-content-center ".concat(Me.a.btnContainer)},n.a.createElement("button",{type:"button",className:"btn btn-".concat(m?"info":"secondary"),onClick:function(e){e.preventDefault(),c(e)},disabled:!m},r))),n.a.createElement("div",{className:"row justify-content-end"},n.a.createElement("div",{className:"col col-sm-9"},n.a.createElement("span",{className:"alert-danger ".concat(Me.a.error)},p))))},Ne=n.a.memo(Ce,(function(e,a){var r=e.value,t=e.isValid,n=e.error,c=a.value,s=a.isValid,o=a.error;return r===c&&t===s&&n===o})),xe=function(e){return n.a.createElement(Ne,Object.assign({id:"fromAddress",name:"".concat("fromAddress"),type:"text",placeholder:"\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041f\u0443\u0448\u043a\u0438\u043d\u0430, 20",label:"\u041e\u0442\u043a\u0443\u0434\u0430:",btnName:"\u041d\u0430\u0439\u0442\u0438"},e))};xe.defaultProps={extensionContainerClass:"",extensionInputClass:""};var De=xe,Se=function(){var e=Object(o.d)(ne),a=Object(o.c)(),r=function(){a(function(){var e=Object(f.a)(m.a.mark((function e(a,r){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ORDER_FORM/LOCATION/LOAD_REQUEST",payload:null}),a(q()),t=r().input.value,e.next=5,S.getCoordinate(t);case 5:"address"in(n=e.sent)?(a(W(n)),a(Z(n))):(a(Q(n.error)),S.deleteCabFromMap());case 7:case"end":return e.stop()}}),e)})));return function(a,r){return e.apply(this,arguments)}}())};return n.a.createElement(De,Object.assign({},e,{onInputChange:function(e,r){a(function(e){return{type:"ORDER_FORM/INPUT/CHANGE",payload:{data:e}}}(r))},onButtonClick:r,onEnterPress:r}))},Ae=n.a.memo(Se),Ie=r(7),Le=r.n(Ie),Fe=function(e){var a=e.isSuccess,r=e.error,t=e.orderID,c=e.onButtonClick,s=a?"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!":"\u041e\u0448\u0438\u0431\u043a\u0430!",o="\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u2116".concat(t," \u043f\u0440\u0438\u043d\u044f\u0442, \u043e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0437\u0432\u043e\u043d\u043a\u0430."),i=r||"\u0410\u0434\u0440\u0435\u0441 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u0438 \u0432 \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!";return n.a.createElement("div",{className:"modal d-flex justify-content-center align-items-center",tabIndex:-1,role:"dialog",style:{display:"flex"}},n.a.createElement("div",{className:"modal-dialog",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title"},s),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:c},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement("p",null,a?o:i)),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:c},"Close")))))},Te=function(){var e=Object(o.d)(ie,o.b),a=Object(o.c)(),r=function(e){e.preventDefault(),a({type:G,payload:null})},t=e.isSending,c=e.isSuccess,s=e.error,i=e.orderID;return n.a.createElement("div",null,t&&n.a.createElement("div",{className:"modal d-flex justify-content-center align-items-center",tabIndex:-1,role:"dialog",style:{display:"flex"}},n.a.createElement(ue,{isLarge:!0})),c&&n.a.createElement(Fe,{isSuccess:!0,orderID:i,onButtonClick:r}),s&&n.a.createElement(Fe,{isSuccess:!1,error:s,onButtonClick:r}))},Ve=n.a.memo(Te),Ue=function(){var e=Object(o.d)(oe,o.b),a=Object(o.c)(),r=e.isAddressValid&&e.isInputValid&&!!e.crew;return n.a.createElement("form",{className:"form",name:"signInForm"},n.a.createElement("p",{className:"visually-hidden"},"\u0424\u043e\u0440\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("fieldset",{className:Le.a.inputs},n.a.createElement(Ae,null)))),n.a.createElement("fieldset",{className:Le.a.crew},n.a.createElement(fe,null)),n.a.createElement("div",{className:"row flex-column flex-sm-row ".concat(Le.a.noGut)},n.a.createElement("div",{className:"col col-sm-8"},n.a.createElement("fieldset",{className:Le.a.map},n.a.createElement(Ee,null))),n.a.createElement("div",{className:"col col-sm-4"},n.a.createElement("fieldset",{className:Le.a.list},n.a.createElement(ge,null)))),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-auto"},n.a.createElement("fieldset",{className:Le.a.control},n.a.createElement(ee,{text:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c",name:"signInSubmit",onButtonClick:function(e){e.preventDefault(),a(function(){var e=Object(f.a)(m.a.mark((function e(a,r){var t,n,c,s,o,i,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r(),n=t.input.value,c=t.location,s=t.crew.selected,o=c.address,i=c.lat,l=c.lon,a({type:"ORDER_FORM/ORDER/SEND_REQUEST",payload:null}),!(n===o&&i&&l&&s)){e.next=10;break}return e.next=6,B({address:o,lat:i,lon:l},s);case 6:d=e.sent,a("orderID"in d?{type:"ORDER_FORM/ORDER/SEND_SUCCESS",payload:{id:d.orderID}}:H(d.error)),e.next=11;break;case 10:a(H("\u0410\u0434\u0440\u0435\u0441 \u0432 \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u043c\u0435\u0442\u043a\u043e\u0439 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435."));case 11:case"end":return e.stop()}}),e)})));return function(a,r){return e.apply(this,arguments)}}())},disabled:!r})))),n.a.createElement(Ve,null))},Be=function(){return n.a.createElement("div",{className:"container-md"},n.a.createElement("header",{className:l.a.header},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("h2",null,"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"))),n.a.createElement("main",{className:l.a.main},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col col-md-12 col-lg-9 col-xl-8"},n.a.createElement(Ue,null)))),n.a.createElement("footer",{className:"visually-hidden"}))},Pe=r(8),Ge=r(25),We=r(26),Qe=Object(Pe.applyMiddleware)(We.a),Je=Object(Ge.composeWithDevTools)(Qe),qe=Object(Pe.createStore)(Y,z,Je),He=function(){return n.a.createElement(o.a,{store:qe},n.a.createElement(Be,null))};r(40);s.a.render(n.a.createElement(He,null),document.getElementById("root"))},7:function(e,a,r){e.exports={noGut:"OrderForm_noGut__Qq_4V",col:"OrderForm_col__3l-Wa",map:"OrderForm_map__1_9gb",list:"OrderForm_list__2fI09",control:"OrderForm_control__1-HC4"}},9:function(e,a,r){e.exports={model:"CrewItem_model__Rc-dG",color:"CrewItem_color__35wet",distance:"CrewItem_distance__36Dpy"}}},[[28,1,2]]]);
//# sourceMappingURL=main.aeb2a568.chunk.js.map